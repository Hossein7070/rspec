<p>The &lt;code&gt;java.util.Collection&lt;/code&gt; API has methods that accept &lt;code&gt;Object&lt;/code&gt; parameters such as &lt;code&gt;Collection.remove(Object o)&lt;/code&gt;, and &lt;code&gt;Collection.contains(Object o)&lt;/code&gt;. When the actual type of the object provided to these methods is not consistent with the type declared on the &lt;code&gt;Collection&lt;/code&gt; instantiation, those methods will always return &lt;code&gt;false&lt;/code&gt; or &lt;code&gt;null&lt;/code&gt;. This is most likely unintended and hides a design problem.</p>
<p>This rule raises an issue when the type of the argument of the following APIs is unrelated to the type used for the &lt;code&gt;Collection&lt;/code&gt; declaration:</p>
<ul>
<li>&lt;code&gt;Collection.remove(Object o)&lt;/code&gt;</li>
<li>&lt;code&gt;Collection.removeAll(Collection&lt;?&gt;)&lt;/code&gt;</li>
<li>&lt;code&gt;Collection.contains(Object o)&lt;/code&gt;</li>
<li>&lt;code&gt;List.indexOf(Object o)&lt;/code&gt;</li>
<li>&lt;code&gt;List.lastIndexOf(Object o)&lt;/code&gt;</li>
<li>&lt;code&gt;Map.containsKey(Object key)&lt;/code&gt;</li>
<li>&lt;code&gt;Map.containsValue(Object value)&lt;/code&gt;</li>
<li>&lt;code&gt;Map.get(Object key)&lt;/code&gt;</li>
<li>&lt;code&gt;Map.getOrDefault(Object key, V defaultValue)&lt;/code&gt;</li>
<li>&lt;code&gt;Map.remove(Object key)&lt;/code&gt;</li>
<li>&lt;code&gt;Map.remove(Object key, Object value)&lt;/code&gt;</li>
</ul>
<h2>Noncompliant Code Example</h2>
<pre>
public class S2175 {

  public static void main(String[] args) {
    String foo = "42";
    Map&lt;Integer, Object&gt; map = new HashMap&lt;&gt;();
    map.remove(foo); // Noncompliant; will return 'null' for sure because 'map' is handling only Integer keys

    // ...

    List&lt;String&gt; list = new ArrayList&lt;String&gt;();
    Integer integer = Integer.valueOf(1);
    if (list.contains(integer)) { // Noncompliant; always false.
      list.remove(integer); // Noncompliant; list.add(integer) doesn't compile, so this will always return 'false'
    }
  }

}
</pre>
<h2>See</h2>
<ul>
<li><a href="https://www.securecoding.cert.org/confluence/x/QwFlAQ">CERT, EXP04-J.</a> - Do not pass arguments to certain Java Collections Framework methods that are a different type than the collection parameter type</li>
</ul>
